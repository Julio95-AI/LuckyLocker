# 更新日志

## [0.1.0] - 2026-01-22

### 新增功能
- ✨ **系统版本管理**：版本号 0.1.0，在前后端显示
- 🎬 **抽奖动画效果**：3秒转动动画，8个格子随机高亮切换
- 🛡️ **冷却防刷机制**：
  - 同一IP/UA只能抽一次
  - 不同IP/UA需等待1-3分钟随机时间
  - 提示"数据同步中，请稍后刷新重试"
- 🎫 **绿通凭证系统**：
  - 后台可添加凭证（手机号/订单号/自定义码）
  - 设置剩余抽奖次数和有效期
  - 用户通过凭证可绕过限制抽奖
- 🎁 **预设产品池**：
  - 后台管理产品名称列表
  - 前端从产品池随机显示，每5秒刷新
  - 产品名称不一定对应实际格子商品

### 界面优化
- 格子柜后台显示完整开锁密码（格式：格子号-密码）
- 移除"全部重置"按钮，改为逐个管理
- 商品名称输入框提示文字优化

### 技术改进
- 数据库新增 `greenlist` 表（绿通凭证）
- 数据库新增 `product_pool` 表（产品池）
- `draw_records` 表新增 `last_draw_time` 字段
- API新增绿通凭证验证接口
- API新增产品池管理接口

### 防作弊强化
- IP + User-Agent 双重识别
- 随机冷却时间（1-3分钟）
- 绿通凭证有效期和次数限制
- 抽奖记录包含时间戳用于冷却判断

---

**升级说明**：
1. 首次启动会自动创建新表和初始化数据
2. 旧数据库会自动迁移兼容
3. 建议备份数据库后再升级
